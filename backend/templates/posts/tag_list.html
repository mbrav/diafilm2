{% extends '../base.html' %}
{% block title %}
{{ tag.name }}
{% endblock %}
{% block content %}
{% load static %}
{% load cache %}
{% cache 6000 tag_list_header tag.category tag.name %}
{% if page_obj.object_list.0.image %}
{% load thumbnail %}
{% thumbnail page_obj.object_list.0.image "600x200" crop="center" as im %}
<header
  class="masthead py-6"
  style="background-image: url('{{ im.url }}">
{% endthumbnail %}
{% else %}
<header
  class="masthead py-6"
  style="background-image: url('{% static 'img/bg/bg-4.jpg' %}')">
{% endif %}
  <div class="container position-relative px-4 px-lg-5">
    <div class="row gx-4 gx-lg-5 justify-content-center">
      <div class="col-md-10 col-lg-8 col-xl-7">
        <div class="page-heading">
          <h2>Тэг «<span class="highlight-text-color">{{ tag.name }}</span>»</h2>
          <h3>Категория <span class="highlight-text-color">{{ tag.category }}</span></h3>
          {% comment %} <p>{{group.description}}</p> {% endcomment %}
          <span class="subheading"><b>Всего {% if post_view %}постов{% else %}диафильмов{% endif %}: {{ page_obj.paginator.count }}</b></span>
        </div>
      </div>
    </div>
  </div>
</header>
{% endcache %}
<!-- Основной Контент-->
<main class="mb-4">
  <div class="container px-4 px-lg-5">
  {% include 'includes/switcher.html' %}
  {% if post_view %}
    {% include 'includes/paginator.html' with url_vars="&post_view=True" %}
  {% else %}
    {% include 'includes/paginator.html' %}
  {% endif %}
  <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-3">
    {% for post in page_obj %}
      {% include 'includes/post_card.html' %}
    {% endfor %}
  </div>
  {% if post_view %}
    {% include 'includes/paginator.html' with url_vars="&post_view=True" %}
  {% else %}
    {% include 'includes/paginator.html' %}
  {% endif %}
  </div>
</main>
{% endblock %}